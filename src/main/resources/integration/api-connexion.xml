<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:int="http://www.springframework.org/schema/integration"
  xmlns:int-http="http://www.springframework.org/schema/integration/http"
  xmlns:int-stream="http://www.springframework.org/schema/integration/stream"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
    http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd
    http://www.springframework.org/schema/integration/stream http://www.springframework.org/schema/integration/stream/spring-integration-stream.xsd">

  <int:inbound-channel-adapter channel="connexion.channel" expression="''">
    <int:poller fixed-delay="60000"></int:poller>
  </int:inbound-channel-adapter>

  <!-- Pantages Theater request -->
  <int:chain input-channel="connexion.channel">
    <int:transformer ref="connexionTransformer"/>
    <int-http:outbound-gateway
      url="#{apiConfig.properties.api.baseUrl}#{apiConfig.properties.api.loginPath}"
      http-method="POST"
      reply-timeout="5000"
      expected-response-type="io.swagger.sinapps.api.client.transverse.model.InlineResponse200">
    </int-http:outbound-gateway>
    <int:service-activator ref="connexionHandler"/>
    <int-stream:stdout-channel-adapter id="consoleOut" append-newline="true"/>
  </int:chain>

</beans>